# Azureの監視系ソリューション

## Azure Security Center

- ワークロードのセキュリティを管理するために使用するサービス
- オンプレ、クラウド、場所不問

[もうちょっと詳しく](./AzureSecurityCenter.md)

## Azure Application Insights

- アプリケーションのパフォーマンスを監視および管理
- アプリケーションのパフォーマンス、エラー、および例外に関する情報が自動的に収集

[もうちょっと詳しく](./AzureAppInsights.md)
  
## Azure Sentinel

- 企業全体のデバイス、ユーザー、インフラストラクチャ、アプリケーションに関するデータを収集
- 検出と調査のための組み込みの脅威インテリジェンスが、誤検知を減らす
- 脅威や異常を事前に探し、オーケストレーションと自動化を使って対応
- Azure Logic Appsを使用してプレイブックを構成し、アラートへの対応を定義可能

[もうちょっと詳しく](./AzureSentinel.md)

## Azure Monitor

- アプリ、インフラ、その他さまざまなソースからのデータを収集、結合、および分析するためのサービス
- Application Insights によって収集されたすべてのアプリケーション ログ データは、Azure Monitor でアクセスできるワークスペースに格納されます。 これで、すべてのアプリケーションの正常性とパフォーマンスを監視および分析するための一元的な場所を利用できるように
- Security Center などの他のサービスも Azure Monitor に依存しています。 たとえば、Security Center では、仮想マシンやその他のリソースからセキュリティ関連のデータが収集されます。 Security Center によって、Azure Monor からアクセスできるワークスペースにこのデータが格納される
  
[もうちょっと詳しく](./AzureMonitor.md)


## 診断データを収集および分析して **Azure 仮想マシンの正常性**を監視する

### Azure VM の基本メトリック

- CPU 使用率
- ネットワーク トラフィック
- OS ディスク使用量
- 起動の成功

### その他のメトリック

- "Azure Diagnostics 拡張機能" と "Log Analytics エージェント" が必要
- ストレージアカウントが必要
- 以下が取得できるようになる
  - 強化されたブート診断を使用してブートの問題を調査する。
  - 今後の分析のためにログやメトリックをアーカイブする。
  - VM のパフォーマンスに応じて仮想マシンのスケール セットを自動スケーリングする。
  - Application Insights を使用してアプリレベルのメトリックを取得する。
  - OS の更新を自動化する
  - 一定期間における VM の構成変更を追跡する。

- 概要でデフォルトのメトリクスが確認可能
- Diagを補完しようと思ったらストレージアカウントが必要

より詳細なメトリクス、リアルタイムのメトリクスが必要な場合は、Azure Diagnosticsを追加導入する。
拡張機能の有効には、VM作成時に監視セクションでOSのゲスト診断を有効にする
作成済みの場合は、診断設定から、ゲストレベルのモニタリングを有効にする。
拡張機能は Azure CLI または PowerShell を使用して追加することもできます。 
	Azure CLI では、az vm boot-diagnostics enable 
	PowerShell の場合は、Set-AzVMBootDiagnostic
	

